{"mappings":"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","sources":["src/js/infinityScroll.js"],"sourcesContent":["import '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst IMG_ONPAGE = 40;\n\nconst form = document.querySelector('#search-form');\nconst increaseGalleryBtn = document.querySelector('.load-more');\nconst galleryEl = document.querySelector('.gallery');\n\nform.elements.searcBtn.setAttribute('disabled', 'true');\n\nlet pageNumber = 1;\nlet lightbox = '';\nlet inputValue = '';\n\nform.addEventListener('input', () =>\n  form.elements.searcBtn.removeAttribute('disabled', 'true')\n);\n\nform.addEventListener('submit', onFormBtnCreateList);\n\nasync function onFormBtnCreateList(e) {\n  e.preventDefault();\n  form.elements.searcBtn.setAttribute('disabled', 'true');\n  pageNumber = 1;\n  inputValue = e.currentTarget.elements.searchQuery.value;\n  if (inputValue.trim().length === 0) {\n    form.reset();\n    return Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n  try {\n    const imgData = await getPic(inputValue);\n    // console.log(imgData.hits.length);\n\n    if (imgData.hits.length === 0) {\n      form.reset(imgData.hits.length === 0);\n      increaseGalleryBtn.classList.add('visually-hidden');\n\n      galleryEl.innerHTML = '';\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else if (imgData.totalHits <= IMG_ONPAGE) {\n      increaseGalleryBtn.classList.add('visually-hidden');\n      totalScoreMessage(imgData);\n      galleryEl.innerHTML = await marcupGallery(imgData.hits);\n      lightboxGallery();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n\n    totalScoreMessage(imgData);\n\n    galleryEl.innerHTML = await marcupGallery(imgData.hits);\n    lightboxGallery();\n    increaseGalleryBtn.classList.remove('visually-hidden');\n    window.addEventListener('scroll', onincreaseGalleryScroll);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onincreaseGalleryScroll() {\n  const docEl = document.documentElement;\n\n  if (docEl.getBoundingClientRect().bottom < docEl.clientHeight + 200) {\n    window.removeEventListener('scroll', onincreaseGalleryScroll);\n    pageNumber += 1;\n    console.log(pageNumber);\n    try {\n      const imgData = await getPic(inputValue);\n      if (\n        imgData.totalHits - (imgData.hits.length * pageNumber + IMG_ONPAGE) <=\n        0\n      ) {\n        increaseGalleryBtn.classList.add('visually-hidden');\n        galleryEl.insertAdjacentHTML(\n          'beforeend',\n          await marcupGallery(imgData.hits)\n        );\n        lightbox.refresh();\n        window.removeEventListener('scroll', onincreaseGalleryScroll);\n        return Notiflix.Notify.failure(\n          `We're sorry, but you've reached the end of search results.`\n        );\n      }\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        await marcupGallery(imgData.hits)\n      );\n      lightbox.refresh();\n      increaseGalleryBtn.classList.remove('visually-hidden');\n      window.addEventListener('scroll', onincreaseGalleryScroll);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nasync function getPic(inputValue) {\n  const response = await axios({\n    url: 'https://pixabay.com/api/',\n    params: {\n      key: '33377492-476d22b77d4b85ba3622e340f',\n      q: `${inputValue}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: pageNumber,\n      per_page: IMG_ONPAGE,\n    },\n  });\n  return response.data;\n}\n\nfunction marcupGallery(data) {\n  return data\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <a class=\"gallery__item\" href=\"${largeImageURL}\">\n      <div class=\"photo-card\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div></div></a>\n    `;\n      }\n    )\n    .join('');\n}\n\nfunction lightboxGallery() {\n  lightbox = new SimpleLightbox('.gallery a');\n}\n\nfunction totalScoreMessage(data) {\n  Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n}\n"],"names":["$bpxeT","parcelRequire","$0dda5a411dab1a32$var$IMG_ONPAGE","$0dda5a411dab1a32$var$form","document","querySelector","$0dda5a411dab1a32$var$increaseGalleryBtn","$0dda5a411dab1a32$var$galleryEl","elements","searcBtn","setAttribute","$0dda5a411dab1a32$var$pageNumber","$0dda5a411dab1a32$var$lightbox","$0dda5a411dab1a32$var$inputValue","$0dda5a411dab1a32$var$_onFormBtnCreateList","$parcel$interopDefault","$2TvXO","mark","_callee","e","imgData","preventDefault","currentTarget","searchQuery","value","trim","length","reset","$6JpON","Notify","failure","$0dda5a411dab1a32$var$getPic","_ctx","sent","hits","classList","add","innerHTML","totalHits","$0dda5a411dab1a32$var$totalScoreMessage","$0dda5a411dab1a32$var$marcupGallery","$0dda5a411dab1a32$var$lightboxGallery","remove","window","addEventListener","$0dda5a411dab1a32$var$onincreaseGalleryScroll","console","log","t0","apply","this","arguments","$0dda5a411dab1a32$var$_onincreaseGalleryScroll","docEl","documentElement","getBoundingClientRect","bottom","clientHeight","removeEventListener","insertAdjacentHTML","call","t1","refresh","t2","t3","t4","inputValue1","$0dda5a411dab1a32$var$_getPic","response","$dIxxU","default","url","params","key","q","concat","image_type","orientation","safesearch","page","per_page","data","map","param","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$5IjG7","info","removeAttribute"],"version":3,"file":"infinityScroll.522be073.js.map"}