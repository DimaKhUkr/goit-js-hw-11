{"mappings":"gkBAQA,MAEMA,EAAOC,SAASC,cAAc,gBAC9BC,EAAqBF,SAASC,cAAc,cAC5CE,EAAYH,SAASC,cAAc,YAEzCF,EAAKK,SAASC,SAASC,aAAa,WAAY,QAEhD,IAAIC,EAAa,EACbC,EAAW,GACXC,EAAa,GAoDjBC,eAAeC,IACb,MAAMC,EAAQZ,SAASa,gBAEvB,GAAID,EAAME,wBAAwBC,OAASH,EAAMI,aAAe,IAAK,CACnEC,OAAOC,oBAAoB,SAAUP,GACrCJ,GAAc,EACdY,QAAQC,IAAIb,GACZ,IACE,MAAMc,QAAgB,EAAAC,EAAAC,SAAOd,EAAYF,EAtE5B,IAuEb,GACEc,EAAQG,WAAaH,EAAQI,KAAKC,OAASnB,EAxEhC,KAyEX,EASA,OAPAL,EAAmByB,UAAUC,IAAI,mBACjCzB,EAAU0B,mBACR,kBACMC,EAAcT,EAAQI,OAE9BjB,EAASuB,UACTd,OAAOC,oBAAoB,SAAUP,GAC9BqB,EAAAC,GAASC,OAAOC,QACrB,8DAGJhC,EAAU0B,mBACR,kBACMC,EAAcT,EAAQI,OAE9BjB,EAASuB,UACT7B,EAAmByB,UAAUS,OAAO,mBACpCnB,OAAOoB,iBAAiB,SAAU1B,E,CAClC,MAAO2B,GACPnB,QAAQC,IAAIkB,E,GAqBlB,SAASR,EAAcS,GACrB,OAAOA,EACJC,KACC,EAACC,cACCA,EAAaC,aACbA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,0CACwBN,+EAEEC,WAAsBC,wGAGvCC,yEAGAC,4EAGGC,6EAGCC,kDAMvBC,KAAK,G,CAGV,SAASC,IACPzC,EAAW,IAAIwB,EAAAkB,GAAJ,CAAmB,a,CAGhC,SAASC,EAAkBZ,GACzBP,EAAAC,GAASC,OAAOkB,KAAK,oBAAoBb,EAAKf,oB,CAhJhDzB,EAAKsC,iBAAiB,SAAS,IAC7BtC,EAAKK,SAASC,SAASgD,gBAAgB,WAAY,UAGrDtD,EAAKsC,iBAAiB,UAEtB3B,eAAmC4C,GAKjC,GAJAA,EAAEC,iBACFxD,EAAKK,SAASC,SAASC,aAAa,WAAY,QAChDC,EAAa,EACbE,EAAa6C,EAAEE,cAAcpD,SAASqD,YAAYC,MACjB,IAA7BjD,EAAWkD,OAAOjC,OAEpB,OADA3B,EAAK6D,QACE5B,EAAAC,GAASC,OAAOC,QACrB,4EAGJ,IACE,MAAMd,QAAgB,EAAAC,EAAAC,SAAOd,EAAYF,EA9B1B,IAiCf,GAA4B,IAAxBc,EAAQI,KAAKC,OAKf,OAJA3B,EAAK6D,MAA8B,IAAxBvC,EAAQI,KAAKC,QACxBxB,EAAmByB,UAAUC,IAAI,mBAEjCzB,EAAU0D,UAAY,GACf7B,EAAAC,GAASC,OAAOC,QACrB,4EAEG,GAAId,EAAQG,WAzCJ,GA8Cb,OAJAtB,EAAmByB,UAAUC,IAAI,mBACjCuB,EAAkB9B,GAClBlB,EAAU0D,gBAAkB/B,EAAcT,EAAQI,MAClDwB,IACOjB,EAAAC,GAASC,OAAOC,QACrB,8DAIJgB,EAAkB9B,GAElBlB,EAAU0D,gBAAkB/B,EAAcT,EAAQI,MAClDwB,IACA/C,EAAmByB,UAAUS,OAAO,mBACpCnB,OAAOoB,iBAAiB,SAAU1B,E,CAClC,MAAO2B,GACPnB,QAAQC,IAAIkB,E","sources":["src/js/infinityScroll.js"],"sourcesContent":["import '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport getPic from './fetch';\n\nconst IMG_ONPAGE = 40;\n\nconst form = document.querySelector('#search-form');\nconst increaseGalleryBtn = document.querySelector('.load-more');\nconst galleryEl = document.querySelector('.gallery');\n\nform.elements.searcBtn.setAttribute('disabled', 'true');\n\nlet pageNumber = 1;\nlet lightbox = '';\nlet inputValue = '';\n\nform.addEventListener('input', () =>\n  form.elements.searcBtn.removeAttribute('disabled', 'true')\n);\n\nform.addEventListener('submit', onFormBtnCreateList);\n\nasync function onFormBtnCreateList(e) {\n  e.preventDefault();\n  form.elements.searcBtn.setAttribute('disabled', 'true');\n  pageNumber = 1;\n  inputValue = e.currentTarget.elements.searchQuery.value;\n  if (inputValue.trim().length === 0) {\n    form.reset();\n    return Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n  try {\n    const imgData = await getPic(inputValue, pageNumber, IMG_ONPAGE);\n    // console.log(imgData.hits.length);\n\n    if (imgData.hits.length === 0) {\n      form.reset(imgData.hits.length === 0);\n      increaseGalleryBtn.classList.add('visually-hidden');\n\n      galleryEl.innerHTML = '';\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else if (imgData.totalHits <= IMG_ONPAGE) {\n      increaseGalleryBtn.classList.add('visually-hidden');\n      totalScoreMessage(imgData);\n      galleryEl.innerHTML = await marcupGallery(imgData.hits);\n      lightboxGallery();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n\n    totalScoreMessage(imgData);\n\n    galleryEl.innerHTML = await marcupGallery(imgData.hits);\n    lightboxGallery();\n    increaseGalleryBtn.classList.remove('visually-hidden');\n    window.addEventListener('scroll', onincreaseGalleryScroll);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onincreaseGalleryScroll() {\n  const docEl = document.documentElement;\n\n  if (docEl.getBoundingClientRect().bottom < docEl.clientHeight + 200) {\n    window.removeEventListener('scroll', onincreaseGalleryScroll);\n    pageNumber += 1;\n    console.log(pageNumber);\n    try {\n      const imgData = await getPic(inputValue, pageNumber, IMG_ONPAGE);\n      if (\n        imgData.totalHits - (imgData.hits.length * pageNumber + IMG_ONPAGE) <=\n        0\n      ) {\n        increaseGalleryBtn.classList.add('visually-hidden');\n        galleryEl.insertAdjacentHTML(\n          'beforeend',\n          await marcupGallery(imgData.hits)\n        );\n        lightbox.refresh();\n        window.removeEventListener('scroll', onincreaseGalleryScroll);\n        return Notiflix.Notify.failure(\n          `We're sorry, but you've reached the end of search results.`\n        );\n      }\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        await marcupGallery(imgData.hits)\n      );\n      lightbox.refresh();\n      increaseGalleryBtn.classList.remove('visually-hidden');\n      window.addEventListener('scroll', onincreaseGalleryScroll);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// async function getPic(inputValue) {\n//   const response = await axios({\n//     url: 'https://pixabay.com/api/',\n//     params: {\n//       key: '33377492-476d22b77d4b85ba3622e340f',\n//       q: `${inputValue}`,\n//       image_type: 'photo',\n//       orientation: 'horizontal',\n//       safesearch: true,\n//       page: pageNumber,\n//       per_page: IMG_ONPAGE,\n//     },\n//   });\n//   return response.data;\n// }\n\nfunction marcupGallery(data) {\n  return data\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <a class=\"gallery__item\" href=\"${largeImageURL}\">\n      <div class=\"photo-card\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div></div></a>\n    `;\n      }\n    )\n    .join('');\n}\n\nfunction lightboxGallery() {\n  lightbox = new SimpleLightbox('.gallery a');\n}\n\nfunction totalScoreMessage(data) {\n  Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n}\n"],"names":["$2ce415f148c0c897$var$form","document","querySelector","$2ce415f148c0c897$var$increaseGalleryBtn","$2ce415f148c0c897$var$galleryEl","elements","searcBtn","setAttribute","$2ce415f148c0c897$var$pageNumber","$2ce415f148c0c897$var$lightbox","$2ce415f148c0c897$var$inputValue","async","$2ce415f148c0c897$var$onincreaseGalleryScroll","docEl","documentElement","getBoundingClientRect","bottom","clientHeight","window","removeEventListener","console","log","imgData","$cyIMT","default","totalHits","hits","length","classList","add","insertAdjacentHTML","$2ce415f148c0c897$var$marcupGallery","refresh","$parcel$interopDefault","$7Y9D8","Notify","failure","remove","addEventListener","error","data","map","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$2ce415f148c0c897$var$lightboxGallery","$fZKcF","$2ce415f148c0c897$var$totalScoreMessage","info","removeAttribute","e","preventDefault","currentTarget","searchQuery","value","trim","reset","innerHTML"],"version":3,"file":"infinityScroll.3aaf52a5.js.map"}