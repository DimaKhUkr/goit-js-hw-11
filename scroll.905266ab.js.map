{"mappings":"gkBAQA,MAEMA,EAAOC,SAASC,cAAc,gBAC9BC,EAAqBF,SAASC,cAAc,cAC5CE,EAAYH,SAASC,cAAc,YAEzCF,EAAKK,SAASC,SAASC,aAAa,WAAY,QAEhD,IAAIC,EAAa,EACbC,EAAW,GAqGf,SAASC,EAAcC,GACrB,OAAOA,EACJC,KACC,EAACC,cACCA,EAAaC,aACbA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,0CACwBN,+EAEEC,WAAsBC,wGAGvCC,yEAGAC,4EAGGC,6EAGCC,kDAMvBC,KAAK,G,CAGV,SAASC,IACPZ,EAAW,IAAIa,EAAAC,GAAJ,CACT,a,CA2BJ,SAASC,EAAkBb,GACzBW,EAAAG,GAASC,OAAOC,KAAK,oBAAoBhB,EAAKiB,oB,CArKhD5B,EAAK6B,iBAAiB,SAAS,IAC7B7B,EAAKK,SAASC,SAASwB,gBAAgB,WAAY,UAGrD9B,EAAK6B,iBAAiB,UAGtBE,eAAmCC,GACjCA,EAAEC,iBACFjC,EAAKK,SAASC,SAASC,aAAa,WAAY,QAChDC,EAAa,EACb,MAAQ0B,MAAOC,GAAeH,EAAEI,cAAc/B,SAASgC,YACvD,GAAiC,IAA7BF,EAAWG,OAAOC,OAEpB,OADAvC,EAAKwC,QACElB,EAAAG,GAASC,OAAOe,QACrB,4EAGJ,IACE,MAAMC,QAAgB,EAAAC,EAAAC,SAAOT,EAAY3B,EA9B1B,IAiCf,GAA4B,IAAxBkC,EAAQG,KAAKN,OAEf,OADAvC,EAAKwC,MAA8B,IAAxBE,EAAQG,KAAKN,QACjBjB,EAAAG,GAASC,OAAOe,QACrB,4EAEG,GAAIC,EAAQd,WAtCJ,GA0Cb,OAHAJ,EAAkBkB,GAClBtC,EAAU0C,gBAAkBpC,EAAcgC,EAAQG,MAClDxB,IACOC,EAAAG,GAASC,OAAOe,QACrB,8DAIJjB,EAAkBkB,GAElBtC,EAAU0C,gBAAkBpC,EAAcgC,EAAQG,MAClDxB,IAGAlB,EAAmB4C,UAAUC,OAAO,kB,CACpC,MAAOC,GACPC,QAAQC,IAAIF,E,KAvChB9C,EAAmB0B,iBAAiB,SA2CpCE,iBACE5B,EAAmB4C,UAAUK,IAAI,mBACjC5C,GAAc,EACd,MAAQ0B,MAAOC,GAAenC,EAAKK,SAASgC,YAC5C,IACE,MAAMK,QAAgB,EAAAC,EAAAC,SAAOT,EAAY3B,EAhE1B,IAoEf,GAFA0C,QAAQC,IAAI1C,GAGViC,EAAQd,WAAac,EAAQG,KAAKN,OAAS/B,EArE9B,KAsEb,EAQA,OANAL,EAAmB4C,UAAUK,IAAI,mBACjChD,EAAUiD,mBACR,kBACM3C,EAAcgC,EAAQG,OAE9BpC,EAAS6C,UACFhC,EAAAG,GAASC,OAAOe,QACrB,8DAGJrC,EAAUiD,mBACR,kBACM3C,EAAcgC,EAAQG,OA+FlC,WACE,MAAQU,OAAQC,GACdpD,EAAUqD,kBAAkBC,wBAE9BC,OAAOC,SAAS,CACdC,IAAkB,IAAbL,EACLM,SAAU,U,CAnGVC,GACAtD,EAAS6C,UACTnD,EAAmB4C,UAAUC,OAAO,kB,CACpC,MAAOC,GACPC,QAAQC,IAAIF,E","sources":["src/js/scroll.js"],"sourcesContent":["import '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport getPic from './fetch';\n\nconst IMG_ONPAGE = 40;\n\nconst form = document.querySelector('#search-form');\nconst increaseGalleryBtn = document.querySelector('.load-more');\nconst galleryEl = document.querySelector('.gallery');\n\nform.elements.searcBtn.setAttribute('disabled', 'true');\n\nlet pageNumber = 1;\nlet lightbox = '';\n\nform.addEventListener('input', () =>\n  form.elements.searcBtn.removeAttribute('disabled', 'true')\n);\n\nform.addEventListener('submit', onFormBtnCreateList);\nincreaseGalleryBtn.addEventListener('click', onincreaseGalleryBtn);\n\nasync function onFormBtnCreateList(e) {\n  e.preventDefault();\n  form.elements.searcBtn.setAttribute('disabled', 'true');\n  pageNumber = 1;\n  const { value: inputValue } = e.currentTarget.elements.searchQuery;\n  if (inputValue.trim().length === 0) {\n    form.reset();\n    return Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n  try {\n    const imgData = await getPic(inputValue, pageNumber, IMG_ONPAGE);\n    // console.log(imgData.hits.length);\n\n    if (imgData.hits.length === 0) {\n      form.reset(imgData.hits.length === 0);\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else if (imgData.totalHits <= IMG_ONPAGE) {\n      totalScoreMessage(imgData);\n      galleryEl.innerHTML = await marcupGallery(imgData.hits);\n      lightboxGallery();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n\n    totalScoreMessage(imgData);\n\n    galleryEl.innerHTML = await marcupGallery(imgData.hits);\n    lightboxGallery();\n\n    // console.log(lightbox);\n    increaseGalleryBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onincreaseGalleryBtn() {\n  increaseGalleryBtn.classList.add('visually-hidden');\n  pageNumber += 1;\n  const { value: inputValue } = form.elements.searchQuery;\n  try {\n    const imgData = await getPic(inputValue, pageNumber, IMG_ONPAGE);\n    // console.log(imgData.hits.length);\n    console.log(lightbox);\n\n    if (\n      imgData.totalHits - (imgData.hits.length * pageNumber + IMG_ONPAGE) <=\n      0\n    ) {\n      increaseGalleryBtn.classList.add('visually-hidden');\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        await marcupGallery(imgData.hits)\n      );\n      lightbox.refresh();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      await marcupGallery(imgData.hits)\n    );\n    smothScroll();\n    lightbox.refresh();\n    increaseGalleryBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// async function getPic(inputValue) {\n//   const response = await axios({\n//     url: 'https://pixabay.com/api/',\n//     params: {\n//       key: '33377492-476d22b77d4b85ba3622e340f',\n//       q: `${inputValue}`,\n//       image_type: 'photo',\n//       orientation: 'horizontal',\n//       safesearch: true,\n//       page: pageNumber,\n//       per_page: IMG_ONPAGE,\n//     },\n//   });\n//   return response.data;\n// }\n\nfunction marcupGallery(data) {\n  return data\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <a class=\"gallery__item\" href=\"${largeImageURL}\">\n      <div class=\"photo-card\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div></div></a>\n    `;\n      }\n    )\n    .join('');\n}\n\nfunction lightboxGallery() {\n  lightbox = new SimpleLightbox(\n    '.gallery a'\n    // ,\n    // {\n    // captionsData: 'alt',\n    // captionDelay: 250,\n    // }\n  );\n}\n\n// function imgEmptyArrayChek(data) {\n//   if (data.hits.length === 0) {\n//     form.reset();\n//     return Notiflix.Notify.failure(\n//       'Sorry, there are no images matching your search query. Please try again.'\n//     );\n//   }\n// }\n\n// function imgArrayLenghtChek(data) {\n//   if (data.totalHits - data.hits.length * pageNumber <= 0) {\n//     increaseGalleryBtn.classList.add('visually-hidden');\n//     return Notiflix.Notify.failure(\n//       `We're sorry, but you've reached the end of search results.`\n//     );\n//   }\n// }\n\nfunction totalScoreMessage(data) {\n  Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n}\n\nfunction smothScroll() {\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2.5,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$22b277e67ad1df42$var$form","document","querySelector","$22b277e67ad1df42$var$increaseGalleryBtn","$22b277e67ad1df42$var$galleryEl","elements","searcBtn","setAttribute","$22b277e67ad1df42$var$pageNumber","$22b277e67ad1df42$var$lightbox","$22b277e67ad1df42$var$marcupGallery","data","map","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$22b277e67ad1df42$var$lightboxGallery","$parcel$interopDefault","$fZKcF","$22b277e67ad1df42$var$totalScoreMessage","$7Y9D8","Notify","info","totalHits","addEventListener","removeAttribute","async","e","preventDefault","value","inputValue","currentTarget","searchQuery","trim","length","reset","failure","imgData","$cyIMT","default","hits","innerHTML","classList","remove","error","console","log","add","insertAdjacentHTML","refresh","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$22b277e67ad1df42$var$smothScroll"],"version":3,"file":"scroll.905266ab.js.map"}