{"mappings":"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","sources":["src/js/scroll.js"],"sourcesContent":["import '../css/styles.css';\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst IMG_ONPAGE = 40;\n\nconst form = document.querySelector('#search-form');\nconst increaseGalleryBtn = document.querySelector('.load-more');\nconst galleryEl = document.querySelector('.gallery');\n\nform.elements.searcBtn.setAttribute('disabled', 'true');\n\nlet pageNumber = 1;\nlet lightbox = '';\n\nform.addEventListener('input', () =>\n  form.elements.searcBtn.removeAttribute('disabled', 'true')\n);\n\nform.addEventListener('submit', onFormBtnCreateList);\nincreaseGalleryBtn.addEventListener('click', onincreaseGalleryBtn);\n\nasync function onFormBtnCreateList(e) {\n  e.preventDefault();\n  form.elements.searcBtn.setAttribute('disabled', 'true');\n  pageNumber = 1;\n  const { value: inputValue } = e.currentTarget.elements.searchQuery;\n  if (inputValue.trim().length === 0) {\n    form.reset();\n    return Notiflix.Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  }\n  try {\n    const imgData = await getPic(inputValue);\n    // console.log(imgData.hits.length);\n\n    if (imgData.hits.length === 0) {\n      form.reset(imgData.hits.length === 0);\n      return Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    } else if (imgData.totalHits <= IMG_ONPAGE) {\n      totalScoreMessage(imgData);\n      galleryEl.innerHTML = await marcupGallery(imgData.hits);\n      lightboxGallery();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n\n    totalScoreMessage(imgData);\n\n    galleryEl.innerHTML = await marcupGallery(imgData.hits);\n    lightboxGallery();\n\n    // console.log(lightbox);\n    increaseGalleryBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onincreaseGalleryBtn() {\n  increaseGalleryBtn.classList.add('visually-hidden');\n  pageNumber += 1;\n  const { value: inputValue } = form.elements.searchQuery;\n  try {\n    const imgData = await getPic(inputValue);\n    // console.log(imgData.hits.length);\n    console.log(lightbox);\n\n    if (imgData.totalHits - imgData.hits.length * pageNumber <= 0) {\n      increaseGalleryBtn.classList.add('visually-hidden');\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        await marcupGallery(imgData.hits)\n      );\n      lightbox.refresh();\n      return Notiflix.Notify.failure(\n        `We're sorry, but you've reached the end of search results.`\n      );\n    }\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      await marcupGallery(imgData.hits)\n    );\n    smothScroll();\n    lightbox.refresh();\n    increaseGalleryBtn.classList.remove('visually-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getPic(inputValue) {\n  const response = await axios({\n    url: 'https://pixabay.com/api/',\n    params: {\n      key: '33377492-476d22b77d4b85ba3622e340f',\n      q: `${inputValue}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: pageNumber,\n      per_page: IMG_ONPAGE,\n    },\n  });\n  return response.data;\n}\n\nfunction marcupGallery(data) {\n  return data\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <a class=\"gallery__item\" href=\"${largeImageURL}\">\n      <div class=\"photo-card\">\n      <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b>${likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b>${views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b>${comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b>${downloads}\n        </p>\n      </div></div></a>\n    `;\n      }\n    )\n    .join('');\n}\n\nfunction lightboxGallery() {\n  lightbox = new SimpleLightbox(\n    '.gallery a'\n    // ,\n    // {\n    // captionsData: 'alt',\n    // captionDelay: 250,\n    // }\n  );\n}\n\n// function imgEmptyArrayChek(data) {\n//   if (data.hits.length === 0) {\n//     form.reset();\n//     return Notiflix.Notify.failure(\n//       'Sorry, there are no images matching your search query. Please try again.'\n//     );\n//   }\n// }\n\n// function imgArrayLenghtChek(data) {\n//   if (data.totalHits - data.hits.length * pageNumber <= 0) {\n//     increaseGalleryBtn.classList.add('visually-hidden');\n//     return Notiflix.Notify.failure(\n//       `We're sorry, but you've reached the end of search results.`\n//     );\n//   }\n// }\n\nfunction totalScoreMessage(data) {\n  Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n}\n\nfunction smothScroll() {\n  const { height: cardHeight } =\n    galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2.5,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$dd9e54e108f59881$var$form","document","querySelector","$dd9e54e108f59881$var$increaseGalleryBtn","$dd9e54e108f59881$var$galleryEl","elements","searcBtn","setAttribute","$dd9e54e108f59881$var$pageNumber","$dd9e54e108f59881$var$lightbox","$dd9e54e108f59881$var$_onFormBtnCreateList","$parcel$interopDefault","$2TvXO","mark","_callee","e","_searchQuery","inputValue","imgData","preventDefault","currentTarget","searchQuery","value","trim","length","reset","$6JpON","Notify","failure","$dd9e54e108f59881$var$getPic","_ctx","sent","hits","totalHits","$dd9e54e108f59881$var$totalScoreMessage","$dd9e54e108f59881$var$marcupGallery","innerHTML","$dd9e54e108f59881$var$lightboxGallery","classList","remove","console","log","t0","apply","this","arguments","$dd9e54e108f59881$var$_onincreaseGalleryBtn","add","insertAdjacentHTML","call","t1","refresh","t2","t3","$dd9e54e108f59881$var$smothScroll","t4","$dd9e54e108f59881$var$_getPic","response","$dIxxU","default","url","params","key","q","concat","image_type","orientation","safesearch","page","per_page","data","map","param","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$5IjG7","info","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener","removeAttribute"],"version":3,"file":"scroll.53c652f5.js.map"}